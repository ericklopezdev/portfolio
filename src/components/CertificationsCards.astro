---
import LinuxWindow from './LinuxWindow.astro';
import { getCollection } from 'astro:content';

const certifications = await getCollection('certifications');
---

<div class="certifications-tiling">
  {certifications.map((cert) => (
    <LinuxWindow title="Certification">
      <div class="cert-content">
        <div class="cert-text">
          <h3>{cert.data.title}</h3>
          <p>Issuer: {cert.data.issuer}</p>
          <p>Date: {cert.data.date}</p>
          {cert.data.link && (
            <p><a href={cert.data.link} target="_blank" rel="noopener noreferrer">View Certificate</a></p>
          )}
        </div>
        <div class="cert-image">
          {cert.data.image ? (
            <img src={cert.data.image} alt={`${cert.data.title} Certificate`} />
          ) : (
            '[image placeholder]'
          )}
        </div>
      </div>
    </LinuxWindow>
  ))}
</div>

<style>
   .certifications-tiling {
     display: grid;
     grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
     gap: 1.5rem;
   }

    .cert-content {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }

    .cert-text {
      width: 100%;
      text-align: center;
    }

    .cert-image {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #000000;
      font-size: 0.9rem;
      overflow: hidden;
      width: 100%;
    }

     .cert-image img {
       width: 100%;
       max-height: 450px;
       object-fit: contain;
     }

    /* Tablet responsive */
    @media (max-width: 1024px) {
      .certifications-tiling {
        grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
      }

      .cert-image img {
        max-height: 380px;
      }
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .certifications-tiling {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .cert-content {
        gap: 0.5rem;
      }

      .cert-image img {
        max-height: 350px;
      }
    }
</style>
