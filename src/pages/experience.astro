---
import BaseLayout from '../layouts/BaseLayout.astro';
import BackLink from '../components/BackLink.astro';
import { getCollection } from 'astro:content';

const experiences = await getCollection('experience');
---

  <BaseLayout title="Experience">
  	<section>
  		<BackLink />
 		<h1>Experience</h1>
		<div class="git-log">
			<div class="ascii-header">commit history (HEAD -> main)</div>
			{experiences.map((exp, index) => (
				<>
					<div class="log-entry">
						<span class="marker">*</span> <span class="commit-hash">{exp.data.date}</span> (<span class="branch">{index === 0 ? 'HEAD -> main' : 'main'}</span>) - <span class="title">{exp.data.title}</span> at <span class="company">{exp.data.company}</span>
					</div>
					<div class="log-body">
						{exp.body}
					</div>
					{index < experiences.length - 1 && <div class="separator">|</div>}
				</>
			))}
		</div>
	</section>

	<style>
		.git-log {
			font-family: 'Iosevka', monospace;
			line-height: 1.5;
			color: var(--fg);
			white-space: pre-wrap;
			word-wrap: break-word;
			max-width: 90vw;
			margin: 0 auto;
			position: sticky;
      font-size: 0.9rem;
		}

		@media (min-width: 768px) {
			.git-log {
				max-width: 800px;
        font-size: 1rem;
			}
		}

		.ascii-header {
			color: var(--cyan);
			font-weight: bold;
		}

		.marker {
			color: var(--yellow);
			font-weight: bold;
		}

		.commit-hash {
			color: var(--green);
		}

		.branch {
			color: var(--red);
		}

		.title {
			color: var(--yellow);
		}

		.company {
			color: var(--blue);
		}

		.date {
			color: var(--fg-dim);
		}

		.log-body {
			margin-left: 2rem;
			color: var(--fg);
		}

		.separator {
			color: var(--fg);
			font-weight: bold;
		}
	</style>
</BaseLayout>
